<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- ‚ù§Ô∏è FAVICON CORAZ√ìN -->
    <link rel="shortcut icon"
        href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCI+PHBhdGggZmlsbD0iI2ZmNDY2ZCIgZD0iTTEyIDIxLjM3N2wtMS40OTMtMS4zOTVDNS40IDExLjE1IDIgOC4zNzkgMiA1LjUgMiAzLjQ4IDMuNDggMiAyIDJjMS40IDAgMi44NyAwLjY0IDMuNzMgMS42MkwxMiA2LjM3IDE4LjI3IDMuNjMgMjEgMiBjLTEuNDggMCAyLjUyIDAgMCAyLjUgMCAzLjg3LTMuNCA1LjY1LTguNTEgMTQuNDg2eiIvPjwvc3ZnPg=="
        type="image/x-icon">

    <title>Cartas para mi Yayis üíñ</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- SweetAlert -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <style>
        body {
            margin: 0;
            font-family: 'Segoe UI', sans-serif;
            background: linear-gradient(180deg, #fff0f5, #fde2e4);
            min-height: 100vh;
        }

        h1 {
            text-align: center;
            margin: 20px 0;
        }

        .app-container {
            max-width: 1100px;
            margin: auto;
            padding: 15px;
        }

        .sidebar {
            background: #fff;
            border-radius: 14px;
            padding: 10px;
            max-height: 70vh;
            overflow-y: auto;
        }

        .envelope-item {
            display: flex;
            gap: 12px;
            padding: 10px;
            border-radius: 12px;
            cursor: pointer;
            border: 2px solid transparent;
            transition: .3s;
        }

        .envelope-item:hover {
            background: #ffe5ec;
        }

        .envelope-item.active {
            background: #ffccd5;
            border-color: #ff4d6d;
            box-shadow: 0 4px 10px rgba(255, 77, 109, 0.25);
        }

        .envelope-icon {
            font-size: 30px;
        }

        .envelope-date {
            font-size: 13px;
            color: #666;
        }

        /* SOBRE */
        .envelope {
            position: relative;
            width: 260px;
            height: 170px;
            margin: auto;
            cursor: pointer;
        }

        .envelope-back {
            position: absolute;
            inset: 0;
            background: #ffb3c6;
            border-radius: 18px;
        }

        .envelope-front {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 60%;
            background: #ff8fab;
            border-radius: 0 0 18px 18px;
            z-index: 2;
        }

        .envelope-flap {
            position: absolute;
            top: 0;
            width: 100%;
            height: 100%;
            background: #ff4d6d;
            clip-path: polygon(0 0, 50% 55%, 100% 0);
            transform-origin: top;
            transition: transform .8s ease;
            z-index: 3;
            border-radius: 18px 18px 0 0;
        }

        /* CARTA */
        .letter {
            background: white;
            border-radius: 16px;
            margin-top: 20px;
            padding: 0 20px;
            max-height: 0;
            overflow: hidden;
            transition: max-height 1.2s ease, padding 1s ease;
            position: relative;
        }

        .letter.open {
            max-height: 70vh;
            padding: 20px;
        }

        .letter-date {
            text-align: right;
            font-size: 14px;
            color: #999;
            margin-bottom: 10px;
            position: relative;
            z-index: 2;
        }

        .letter-content {
            text-align: justify;
            white-space: pre-wrap;
            line-height: 1.6;
            font-size: 16px;
            max-height: 50vh;
            overflow-y: auto;
            padding-right: 6px;
            position: relative;
            z-index: 2;
        }

        /* üíß MARCA DE AGUA (VERSI√ìN 1) */
        .watermark {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-20deg);
            font-size: 42px;
            font-weight: 700;
            color: #ff4d6d;
            opacity: 0.08;
            pointer-events: none;
            user-select: none;
            white-space: nowrap;
            z-index: 1;
        }

        .notice {
            margin-top: 10px;
            color: #ff4d6d;
            font-weight: bold;
            display: none;
            text-align: center;
        }

        @media(max-width:768px) {
            .sidebar {
                display: flex;
                gap: 10px;
                overflow-x: auto;
            }

            .envelope-item {
                min-width: 160px;
            }
        }
    </style>
</head>

<body>

    <h1>Para mi Yayis üíñ</h1>

    <div class="app-container">
        <div class="row g-3">

            <div class="col-md-4">
                <div class="sidebar" id="sidebar"></div>
            </div>

            <div class="col-md-8 text-center">

                <div class="envelope" id="openBtn" onclick="openLetter()">
                    <div class="envelope-back"></div>
                    <div class="envelope-front"></div>
                    <div class="envelope-flap"></div>
                </div>

                <div class="notice" id="notice">
                    üíå Primero debes seleccionar un sobre
                </div>

                <div class="letter" id="letter">
                    <div class="watermark">SERGIO MARCOS</div>
                    <div class="letter-date" id="letterDate"></div>
                    <div class="letter-content" id="letterContent"></div>
                </div>

            </div>
        </div>
    </div>

    <script>
        const letters = [
            {
                date: "2025-02-19",
                text: `
Mi yayis hermosa ‚ù§Ô∏è.

No sab√≠a que te estaba buscando porque no sab√≠a que algo me faltaba.
Viv√≠a, caminaba, sonre√≠a‚Ä¶ pero algo no terminaba de encajar.

Y entonces llegaste t√∫.

No como una tormenta, sino como calma.
No como un golpe, sino como un abrazo que no sab√≠a que necesitaba.

Yayis‚Ä¶
Desde que tu nombre empez√≥ a tener sentido en mi vida, entend√≠ que el amor no siempre grita, a veces simplemente se queda.

Contigo aprend√≠ que amar tambi√©n es cuidar, es respetar, es estar incluso cuando no se sabe qu√© decir.

Mi vida, quiero que sepas algo:
si alguna vez sientes miedo, aqu√≠ estoy.
si alguna vez dudas, aqu√≠ sigo.

Amarte no es encerrarte, es caminar a tu lado.
No es exigirte, es sostenerte.

Y aunque no sab√≠a que te estaba buscando‚Ä¶
ahora s√© que siempre fue a ti.

`,
                secret: false
            },
            {
                date: "2025-03-01",
                text: "Esta carta solo se abre si sabes la respuesta üíñ",
                secret: true,
                question: "¬øC√≥mo te digo de cari√±o?",
                answer: "yayis",
                answerType: "text"
            }
        ];

        letters.sort(() => Math.random() - 0.5);

        const sidebar = document.getElementById("sidebar");
        const letter = document.getElementById("letter");
        const letterContent = document.getElementById("letterContent");
        const letterDate = document.getElementById("letterDate");
        const notice = document.getElementById("notice");

        let selectedIndex = null;
        let isOpen = false;

        letters.forEach((l, i) => {
            const [y, m, d] = l.date.split("-");
            const safeDate = new Date(y, m - 1, d);

            const shortDate = safeDate.toLocaleDateString("es-MX", {
                day: "2-digit",
                month: "short",
                year: "numeric"
            });

            const div = document.createElement("div");
            div.className = "envelope-item";
            div.dataset.index = i;
            div.innerHTML = `
                <div class="envelope-icon">${l.secret ? "üîí" : "‚úâÔ∏è"}</div>
                <div>
                    <strong>Carta</strong><br>
                    <span class="envelope-date">${shortDate}</span>
                </div>
            `;
            div.onclick = () => selectLetter(i);
            sidebar.appendChild(div);
        });

        function selectLetter(index) {
            closeLetter();
            selectedIndex = index;
            letterContent.textContent = "";

            document.querySelectorAll(".envelope-item")
                .forEach(el => el.classList.remove("active"));

            document.querySelector(`[data-index="${index}"]`)
                .classList.add("active");

            notice.style.display = "none";
        }

        function openLetter() {
            if (selectedIndex === null) {
                notice.style.display = "block";
                return;
            }

            if (isOpen) return;

            const data = letters[selectedIndex];

            const showLetter = () => {
                const [y, m, d] = data.date.split("-");
                const safeDate = new Date(y, m - 1, d);

                letterDate.textContent = safeDate.toLocaleDateString("es-MX", {
                    day: "numeric",
                    month: "long",
                    year: "numeric"
                });

                letterContent.textContent = data.text;
                letter.classList.add("open");
                isOpen = true;
            };

            if (data.secret) {
                Swal.fire({
                    title: "üíñ Carta secreta",
                    text: data.question,
                    input: data.answerType === "number" ? "number" : "text",
                    showCancelButton: true,
                    confirmButtonText: "Abrir carta",
                    cancelButtonText: "Cancelar"
                }).then(result => {
                    if (
                        result.isConfirmed &&
                        result.value &&
                        result.value.toLowerCase() === data.answer.toLowerCase()
                    ) {
                        showLetter();
                    } else if (result.isConfirmed) {
                        Swal.fire("Ups üò¢", "Respuesta incorrecta", "error");
                    }
                });
            } else {
                showLetter();
            }
        }

        function closeLetter() {
            letter.classList.remove("open");
            isOpen = false;
        }
    </script>

</body>

</html>