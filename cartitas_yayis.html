<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon"
        href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCI+PHBhdGggZmlsbD0iI2ZmNDY2ZCIgZD0iTTEyIDIxLjM3N2wtMS40OTMtMS4zOTVDNS40IDExLjE1IDIgOC4zNzkgMiA1LjUgMiAzLjQ4IDMuNDggMiAyIDJjMS40IDAgMi44NyAwLjY0IDMuNzMgMS42MkwxMiA2LjM3IDE4LjI3IDMuNjMgMjEgMiBjLTEuNDggMCAyLjUyIDAgMCAyLjUgMCAzLjg3LTMuNCA1LjY1LTguNTEgMTQuNDg2eiIvPjwvc3ZnPg=="
        type="image/x-icon">
    <title>Cartas para mi Yayis üíñ</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        body {
            margin: 0;
            font-family: 'Segoe UI', sans-serif;
            min-height: 100vh;
            transition: background 1s;
            overflow-x: hidden;
        }

        h1 {
            text-align: center;
            margin: 20px 0;
            color: #ff4d6d;
            font-size: 2rem;
        }

        .app-container {
            max-width: 1100px;
            margin: auto;
            padding: 15px;
        }

        .sidebar {
            background: #fff;
            border-radius: 14px;
            padding: 10px;
            max-height: 70vh;
            overflow-y: auto;
        }

        .envelope-item {
            display: flex;
            gap: 12px;
            padding: 10px;
            border-radius: 12px;
            cursor: pointer;
            border: 2px solid transparent;
            transition: .3s;
        }

        .envelope-item:hover {
            background: #ffe5ec;
        }

        .envelope-item.active {
            background: #ffccd5;
            border-color: #ff4d6d;
            box-shadow: 0 4px 10px rgba(255, 77, 109, 0.25);
        }

        .envelope-icon {
            font-size: 2rem;
        }

        .envelope-date {
            font-size: 0.8rem;
            color: #666;
        }

        /* SOBRE */
        .envelope {
            position: relative;
            width: 80%;
            max-width: 260px;
            height: 170px;
            margin: auto;
            cursor: pointer;
        }

        .envelope-back {
            position: absolute;
            inset: 0;
            background: #ffb3c6;
            border-radius: 18px;
        }

        .envelope-front {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 60%;
            background: #ff8fab;
            border-radius: 0 0 18px 18px;
            z-index: 2;
        }

        .envelope-flap {
            position: absolute;
            top: 0;
            width: 100%;
            height: 100%;
            background: #ff4d6d;
            clip-path: polygon(0 0, 50% 55%, 100% 0);
            transform-origin: top;
            transition: transform .8s ease;
            z-index: 3;
            border-radius: 18px 18px 0 0;
        }

        /* CARTA */
        .letter {
            background: white;
            border-radius: 16px;
            margin-top: 20px;
            padding: 0 20px;
            max-height: 0;
            overflow: hidden;
            transition: max-height 1.2s ease, padding 1s ease;
            position: relative;
        }

        .letter.open {
            max-height: 70vh;
            padding: 20px;
        }

        .letter-date {
            text-align: right;
            font-size: 0.85rem;
            color: #000;
            margin-bottom: 10px;
            position: relative;
            z-index: 2;
        }

        .letter-content {
            text-align: justify;
            white-space: pre-wrap;
            line-height: 1.6;
            font-size: 1rem;
            max-height: 50vh;
            overflow-y: auto;
            padding-right: 6px;
            position: relative;
            z-index: 2;
            color: #000;
        }

        /* MARCA DE AGUA */
        .watermark {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-20deg);
            font-size: 2.5rem;
            font-weight: 700;
            color: #ff4d6d;
            opacity: 0.08;
            pointer-events: none;
            user-select: none;
            white-space: nowrap;
            z-index: 1;
        }

        .notice {
            margin-top: 10px;
            color: #ff4d6d;
            font-weight: bold;
            display: none;
            text-align: center;
        }

        /* MODO DIA */
        body.day {
            background: linear-gradient(180deg, #cceeff, #a0e0a0);
        }

        .trees {
            position: fixed;
            bottom: 0;
            width: 100%;
            font-size: 2rem;
            text-align: center;
            pointer-events: none;
            user-select: none;
            opacity: 0;
            transition: opacity 0.6s;
        }

        body.day .trees {
            opacity: 1;
        }

        /* MODO NOCHE */
        body.night {
            background: linear-gradient(180deg, #0b132b, #1c2541);
        }

        .moon {
            position: fixed;
            top: 20px;
            right: 80px;
            font-size: 3rem;
            opacity: 0;
            transition: opacity .6s;
            z-index: 1;
        }

        body.night .moon {
            opacity: 1;
        }

        /* ESTRELLAS FIJAS */
        .star {
            position: fixed;
            width: 2px;
            height: 2px;
            background: white;
            border-radius: 50%;
            opacity: 0;
            animation: twinkle 2s infinite alternate;
            z-index: 1;
        }

        body.night .star {
            opacity: 1;
        }

        @keyframes twinkle {
            from {
                opacity: 0.2;
            }

            to {
                opacity: 1;
            }
        }

        /* ESTRELLAS FUGACES */
        .shooting-star {
            position: fixed;
            width: 3px;
            height: 100px;
            background: linear-gradient(to bottom, white, transparent);
            opacity: 0;
            animation: shoot 3s linear infinite;
            z-index: 1;
            display: none;
        }

        body.night .shooting-star {
            display: block;
        }

        @keyframes shoot {
            0% {
                transform: translate(0, 0) rotate(-45deg);
                opacity: 0;
            }

            20% {
                opacity: 1;
            }

            100% {
                transform: translate(-300px, 300px) rotate(-45deg);
                opacity: 0;
            }
        }

        .mode-toggle {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 100;
            padding: 8px 15px;
            background: #ff4d6d;
            border: none;
            border-radius: 12px;
            color: #fff;
            cursor: pointer;
        }

        @media(max-width: 992px) {
            .envelope {
                width: 60%;
                height: 140px;
            }

            .moon {
                font-size: 2.2rem;
                right: 20px;
                top: 15px;
            }

            .trees {
                font-size: 1.5rem;
            }

            .letter-content {
                font-size: 0.95rem;
            }

            .letter-date {
                font-size: 0.8rem;
            }
        }

        @media(max-width: 576px) {
            .envelope {
                width: 90%;
                height: 120px;
            }

            h1 {
                font-size: 1.5rem;
            }

            .moon {
                font-size: 1.8rem;
                right: 15px;
                top: 10px;
            }

            .trees {
                font-size: 1.2rem;
            }

            .letter-content {
                font-size: 0.9rem;
            }

            .letter-date {
                font-size: 0.75rem;
            }
        }
    </style>
</head>

<body>
    <button class="mode-toggle" onclick="toggleMode()">Cambiar Modo</button>

    <h1>Para mi Yayis üíñ</h1>

    <div class="app-container">
        <div class="row g-3">
            <div class="col-md-4">
                <div class="sidebar" id="sidebar"></div>
            </div>
            <div class="col-md-8 text-center">
                <div class="envelope" id="openBtn" onclick="openLetter()">
                    <div class="envelope-back"></div>
                    <div class="envelope-front"></div>
                    <div class="envelope-flap"></div>
                </div>

                <div class="notice" id="notice">
                    üíå Primero debes seleccionar un sobre
                </div>

                <div class="letter" id="letter">
                    <div class="watermark">SERGIO MARCOS</div>
                    <div class="letter-date" id="letterDate"></div>
                    <div class="letter-content" id="letterContent"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- ELEMENTOS DECORATIVOS -->
    <div class="moon">üåï</div>
    <div class="shooting-star" style="top:10%; left:20%; animation-delay:0s;"></div>
    <div class="shooting-star" style="top:30%; left:70%; animation-delay:1.5s;"></div>
    <div class="shooting-star" style="top:50%; left:40%; animation-delay:3s;"></div>
    <div class="shooting-star" style="top:70%; left:80%; animation-delay:4.5s;"></div>
    <div class="trees">üå≥ üå≤ üå≥ üå≤ üå≥</div>

    <!-- ESTRELLAS FIJAS -->
    <div class="star" style="top:5%; left:10%;"></div>
    <div class="star" style="top:15%; left:25%;"></div>
    <div class="star" style="top:20%; left:80%;"></div>
    <div class="star" style="top:40%; left:50%;"></div>
    <div class="star" style="top:60%; left:70%;"></div>
    <div class="star" style="top:75%; left:30%;"></div>
    <div class="star" style="top:85%; left:90%;"></div>

    <script>
        const letters = [
            {
                date: "2026-01-10",
                text: `
üíñ TE AMO MUCHO üíñ
MI YAYIS ‚ù§Ô∏è‚ú®

Eres lo m√°s bonito üå∏
que me ha pasado en la vida üí´
`,
                secret: false,
            },
            {
                date: "2026-01-10",
                text: `
Gracias por cada sonrisa üòä,
por cada abrazo ü§ó
y por existir üíñ‚ú®
`,
                secret: false,
            },
            {
                date: "2026-01-10",
                text: `
Prometo cuidarte üõ°Ô∏è‚ù§Ô∏è,
respetarte ü§ç
y amarte todos los d√≠as üíç‚ú®
`,
                secret: false,
            },
            {
                date: "2026-01-10",
                text: `üíû Si recordaste este d√≠a üíû,
es porque nuestro amor ‚ù§Ô∏è
vive en tu coraz√≥n üíñ‚ú®

Ese anillo üíç no fue una promesa,
fue la certeza ‚ú®
de que quiero caminar contigo üö∂‚Äç‚ôÇÔ∏èüö∂‚Äç‚ôÄÔ∏è
toda la vida üí´üíï

Te amo eternamente ‚ôæÔ∏è‚ù§Ô∏è

‚Äî Tu siempre enamorado üíò
Sergio Marcos ‚ù§Ô∏è`,
                secret: true,
                question:
                    "üíç‚ú® ¬øRecuerdas la fecha en la que un anillo sell√≥ nuestro amor para siempre? ‚ù§Ô∏èüíñ",
                answer: "29/12/2025",
                answerType: "date",
            },
            {
                date: "2026-01-02",
                text: `
Mi adorada Yayis ‚ù§Ô∏èüåπ:

Hoy me despert√© pensando en ti üí≠üíñ y en la suerte que tengo de tenerte conmigo.
Quer√≠a recordarte lo mucho que te amo ‚ù§Ô∏è‚ú® y lo importante que eres para m√≠.

Te escribo porque a veces el coraz√≥n üíì se me llena tanto de ti que las palabras necesitan salir.
Quiero que sepas, hoy m√°s que nunca üåÖ, lo mucho que te amo üíò.

Lo que siento por ti va mucho m√°s all√° de un simple sentimiento üíû,
es un cari√±o incondicional ü§ç.
No importa el d√≠a, el lugar o la circunstancia üåé‚ú®,
mi amor por ti permanece intacto ‚ù§Ô∏è,
firme y dispuesto a todo para verte feliz üòäüíñ.

Eres mi refugio üè°üí´,
mi lugar seguro ü§ó
y la persona que le da un brillo especial ‚ú® a mi mundo üåç.

Gracias por ser como eres üå∏,
por tu ternura üíï
y por caminar a mi lado üë£‚ù§Ô∏è.

Te amo üíû con todo mi ser,
Sergio Marcos üíò
`,
                secret: false,
            },
            {
                date: "2026-01-01",
                text: `
Mi amor üíû‚ú®,

No quer√≠a dejar pasar ni un segundo ‚è≥ de este nuevo a√±o üéÜ
sin decirte lo que significas para m√≠ ‚ù§Ô∏è.

Mientras el mundo celebra un nuevo comienzo üåü,
mi √∫nico deseo es que ese comienzo sea siempre a tu lado ü§ç.

Eres la raz√≥n de mis mejores sonrisas üòä
y mi mayor motivaci√≥n üí™üíñ.
Este a√±o que comienza üóìÔ∏è,
estoy dispuesto a darlo todo por ti y por nosotros ‚ù§Ô∏è‚ú®.

Te deseo un a√±o lleno de luz ‚ú®,
de √©xitos üåà
y de mucha salud üíê mi amor.

¬°Feliz A√±o Nuevo, vida m√≠a! üéâüíñ

Sergio Marcos ‚ù§Ô∏è
`,
                secret: false,
            },
            {
                date: "2025-12-31",
                text: `
Mi adorada Yayis ‚ù§Ô∏è‚ú®,

Hoy me detuve un momento ‚è≥ a pensar en todo lo que hemos vivido üí≠
y no quer√≠a dejar pasar el d√≠a sin decirte
lo mucho que significas para m√≠ üíñ.

Cada risa üòÇ,
cada salida üö∂‚Äç‚ôÄÔ∏èüö∂‚Äç‚ôÇÔ∏è
y hasta los momentos de calma üåô
han sido los mejores de mi vida ‚ù§Ô∏è.

Cualquier lugar es especial üåç‚ú®
si t√∫ est√°s ah√≠ conmigo ü§ç.

Te quiero, te amo y te adoro üíò
con toda mi alma üíì.

Mi mayor deseo üåü
es que este a√±o sea solo uno de much√≠simos m√°s ‚ôæÔ∏è,
porque quiero estar por siempre a tu lado ‚ù§Ô∏è.

Con todo mi amor,
Sergio Marcos üòç
`,
                secret: false,
            },
            {
                date: "2026-01-10",
                text: `
Hola, mi Yayis hermosa ‚ù§Ô∏èüåπ,

Hoy, 10 de enero de 2026 üìÖ,
quiero regalarte estas palabras üíå
que nacen directo de mi coraz√≥n üíñ.

Eres mi sue√±o hecho realidad ‚ú®,
mi reina üëë,
mi todo ‚ù§Ô∏è.

Cada noche üåô
siento que me haces falta üí≠,
que quiero volar ‚úàÔ∏è hasta tus brazos ü§ó.

Siempre estar√© aqu√≠ para ti üõ°Ô∏è‚ù§Ô∏è,
para cuidarte, protegerte
y amarte sin condiciones üíû.

Te amo con todo mi coraz√≥n üíì,
mi Yayis hermosa ‚ù§Ô∏èüòç

Tu siempre enamorado,
Sergio Marcos üíò
`,
                secret: false,
            },
            {
                date: "2026-01-06",
                text: `
Para mi querida Yayis ‚ù§Ô∏èüòç,

Amor üíû,
soy afortunado üçÄ por tenerte a mi lado
y por compartir la vida contigo ‚ú®.

Eres mi apoyo ü§ç,
mi refugio üè°
y mi raz√≥n para sonre√≠r üòä.

Mi promesa es simple y sincera üíç:
siempre estar√© contigo ‚ù§Ô∏è.

Te amo con todo mi coraz√≥n üíì

Sergio Marcos üíò
`,
                secret: false,
            },
            {
                date: "2025-12-26",
                text: `
Cuando te conoc√≠ üí´,
no imagin√© que te volver√≠as tan importante para m√≠ ‚ù§Ô∏è.

Hoy no puedo pasar un solo d√≠a üåÖ
sin hablar contigo üí¨üíñ.

Nuestro amor creci√≥ sin darnos cuenta üå±‚ú®
y ahora eres parte de mi vida üíû.
`,
                secret: false,
            },
        ];

        letters.sort(() => Math.random() - 0.5);

        const sidebar = document.getElementById("sidebar");
        const letter = document.getElementById("letter");
        const letterContent = document.getElementById("letterContent");
        const letterDate = document.getElementById("letterDate");
        const notice = document.getElementById("notice");

        let selectedIndex = null, isOpen = false;

        function normalizeDate(value) { if (!value) return ""; if (value.includes("-")) { const [y, m, d] = value.split("-"); return `${d}/${m}/${y}` } return value; }

        letters.forEach((l, i) => {
            const [y, m, d] = l.date.split("-");
            const safeDate = new Date(y, m - 1, d);
            const shortDate = safeDate.toLocaleDateString("es-MX", { day: "2-digit", month: "short", year: "numeric" });
            const div = document.createElement("div");
            div.className = "envelope-item";
            div.dataset.index = i;
            div.innerHTML = `<div class="envelope-icon">${l.secret ? "üîí" : "‚úâÔ∏è"}</div>
                             <div><strong>Carta</strong><br><span class="envelope-date">${shortDate}</span></div>`;
            div.onclick = () => selectLetter(i);
            sidebar.appendChild(div);
        });

        function selectLetter(index) { closeLetter(); selectedIndex = index; letterContent.textContent = ""; document.querySelectorAll(".envelope-item").forEach(el => el.classList.remove("active")); document.querySelector(`[data-index="${index}"]`).classList.add("active"); notice.style.display = "none"; }

        function openLetter() {
            if (selectedIndex === null) { notice.style.display = "block"; return; }
            if (isOpen) return;
            const data = letters[selectedIndex];
            const showLetter = () => {
                const [y, m, d] = data.date.split("-");
                const safeDate = new Date(y, m - 1, d);
                letterDate.textContent = safeDate.toLocaleDateString("es-MX", { day: "numeric", month: "long", year: "numeric" });
                letterContent.textContent = data.text;
                letter.classList.add("open"); isOpen = true;
            };
            if (data.secret) {
                let inputType = "text";

                if (data.answerType === "number") inputType = "number";
                if (data.answerType === "date") inputType = "date";

                Swal.fire({
                    title: "üíñ Carta secreta",
                    text: data.question,
                    input: inputType,
                    showCancelButton: true,
                    confirmButtonText: "Abrir carta",
                    cancelButtonText: "Cancelar",
                    inputAttributes:
                        data.answerType === "date"
                            ? { placeholder: "Selecciona la fecha" }
                            : {},
                }).then((result) => {
                    if (!result.isConfirmed || !result.value) return;

                    let userAnswer = result.value;
                    let correctAnswer = data.answer;

                    if (data.answerType === "date") {
                        userAnswer = normalizeDate(userAnswer);
                    }

                    if (
                        String(userAnswer).toLowerCase().trim() ===
                        String(correctAnswer).toLowerCase().trim()
                    ) {
                        showLetter();
                    } else {
                        Swal.fire(
                            "Ups üò¢üíî",
                            "Esa no es la respuesta correcta, int√©ntalo de nuevo amor.",
                            "error"
                        );
                    }
                });
            } else { showLetter(); }
        }

        function closeLetter() { letter.classList.remove("open"); isOpen = false; }

        const body = document.body;
        function setModeByHour() {
            const hour = new Date().getHours();
            if (hour >= 19 || hour < 6) { body.classList.add('night'); body.classList.remove('day'); }
            else { body.classList.add('day'); body.classList.remove('night'); }
        }
        function toggleMode() { if (body.classList.contains('night')) { body.classList.remove('night'); body.classList.add('day'); } else { body.classList.remove('day'); body.classList.add('night'); } }

        setModeByHour();
    </script>
</body>

</html>